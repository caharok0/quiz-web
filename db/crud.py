import sqlite3

DB_NAME = 'quizes.db'
conn = None
cursor = None

def open():
    global conn, cursor
    conn = sqlite3.connect(DB_NAME)
    cursor = conn.cursor()

def close():
    global conn, cursor
    cursor.close()
    conn.close()

def create_tables():
    open()

    cursor.execute('''CREATE TABLE IF NOT EXISTS quiz (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title VARCHAR,
    description TEXT
    )''')

    cursor.execute('''CREATE TABLE IF NOT EXISTS questions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    question VARCHAR,
    answer VARCHAR,
    wrong1 VARCHAR,
    wrong2 VARCHAR,
    wrong3 VARCHAR
    )''')

    cursor.execute('''CREATE TABLE IF NOT EXISTS quiz_questions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    quiz_id INTEGER,
    question_id INTEGER,
    FOREIGN KEY (quiz_id) REFERENCES quiz (id),
    FOREIGN KEY (question_id) REFERENCES question (id)
    )''')

    conn.commit()
    close()

def add_quizes():
    open()

    quizes = [
    ("Столиця Франції", "Яке місто є столицею Франції?"),
    ("Автор 'Кобзаря'", "Хто написав збірку поезій 'Кобзар'?"),
    ("Найбільша планета", "Яка планета Сонячної системи є найбільшою?"),
    ("Хімічний символ води", "Який хімічний символ має вода?"),
    ("Рік проголошення незалежності України", "У якому році Україна проголосила незалежність?"),
    ("Мова програмування", "Яка мова програмування використовується для створення вебсайтів разом із HTML та CSS?"),
    ("Винахідник телефону", "Хто винайшов перший телефон?"),
    ("Найвища гора світу", "Як називається найвища гора на Землі?"),
    ("Червона планета", "Яку планету Сонячної системи називають Червоною?"),
    ("Столиця Японії", "Яке місто є столицею Японії?")
    ]

    cursor.executemany('''INSERT INTO quiz (title, description) VALUES (?, ?)''', quizes)
    conn.commit()
    close()


def add_questions(): 
    open()

    questions = [
        # 1–5
        ("Яке місто є столицею Франції?", "Париж", "Лондон", "Берлін", "Мадрид"),
        ("Хто написав збірку поезій 'Кобзар'?", "Тарас Шевченко", "Іван Франко", "Леся Українка", "Михайло Коцюбинський"),
        ("Яка планета Сонячної системи є найбільшою?", "Юпітер", "Сатурн", "Земля", "Нептун"),
        ("Який хімічний символ має вода?", "H₂O", "O₂", "CO₂", "H₂"),
        ("У якому році Україна проголосила незалежність?", "1991", "1989", "1999", "2001"),

        # 6–10
        ("Яка мова програмування використовується для створення вебсайтів разом із HTML та CSS?", "JavaScript", "Python", "C++", "Java"),
        ("Хто винайшов перший телефон?", "Олександр Белл", "Нікола Тесла", "Томас Едісон", "Майкл Фарадей"),
        ("Як називається найвища гора на Землі?", "Еверест", "Кіліманджаро", "Монблан", "Ельбрус"),
        ("Яку планету Сонячної системи називають Червоною?", "Марс", "Венера", "Меркурій", "Юпітер"),
        ("Яке місто є столицею Японії?", "Токіо", "Осака", "Кіото", "Нагоя"),

        # 11–15
        ("Яка найменша країна у світі?", "Ватикан", "Монако", "Сан-Марино", "Ліхтенштейн"),
        ("Скільки континентів існує на Землі?", "7", "5", "6", "8"),
        ("Який океан є найбільшим?", "Тихий", "Атлантичний", "Індійський", "Північний Льодовитий"),
        ("Який метал є основним у виробництві сталі?", "Залізо", "Алюміній", "Мідь", "Цинк"),
        ("Хто створив теорію відносності?", "Альберт Ейнштейн", "Ісаак Ньютон", "Галілео Галілей", "Стівен Гокінг"),

        # 16–20
        ("Який елемент має хімічний символ 'O'?", "Кисень", "Вуглець", "Азот", "Водень"),
        ("Яка тварина є найбільшою у світі?", "Синій кит", "Слон", "Білий ведмідь", "Жираф"),
        ("Хто написав роман 'Гаррі Поттер'?", "Дж. К. Ролінґ", "Стефані Маєр", "Сюзанна Коллінз", "Вероніка Рот"),
        ("Яка планета найближча до Сонця?", "Меркурій", "Венера", "Марс", "Земля"),
        ("Який колір утворюється при змішуванні синього та жовтого?", "Зелений", "Фіолетовий", "Помаранчевий", "Коричневий"),

        # 21–25
        ("Яке місто є столицею Італії?", "Рим", "Мілан", "Неаполь", "Венеція"),
        ("Яка валюта використовується в Європейському Союзі?", "Євро", "Фунт", "Долар", "Крона"),
        ("Хто був першим президентом США?", "Джордж Вашингтон", "Авраам Лінкольн", "Томас Джефферсон", "Джон Адамс"),
        ("Який птах не вміє літати?", "Пінгвін", "Сокіл", "Лелека", "Голуб"),
        ("Яка річка є найдовшою у світі?", "Ніл", "Амазонка", "Міссісіпі", "Янцзи")
    ]





    cursor.executemany('''INSERT INTO questions (question, answer, wrong1, wrong2, wrong3) VALUES (?, ?, ?, ?, ?)''', questions)
    conn.commit()
    close()

def add_links():
    open()
    cursor.execute("PRAGMA foregin_key=on")
    action=input("додати звязок? (y/n)")
    while action != "n":
        quiz_id =int(input("введіть номер вікторини"))
        question_id = int(input("введіть номер запитання"))
        cursor.execute('''INSERT INTO quiz_questions (quiz_id, question_id) VALUES (?, ?)''', [quiz_id, question_id])
        conn.commit()
        action=input("додати звязок? (y/n)")
    close()

def get_quizes():
    open()
    cursor.execute("SELECT * FROM quiz")
    quizes = cursor.fetchall()
    close()
    return quizes


def main():
    # create_tables()
    # add_questions()
    # add_quizes()
    add_links()
